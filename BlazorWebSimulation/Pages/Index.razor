@page "/"
@using Raft_5._2_Class_Library;
@* @rendermode InteractiveServer *@

<PageTitle>Home</PageTitle>

<h1>Hello, world!</h1>

<button @onclick="startSimulation">start</button>
@foreach (var node in nodes)
{
    <div>
        @node.leaderId
    </div>
}

@code {
    List<SimulationNode>? nodes = [];
    void startSimulation()
    {
        var node1 = new Node();
        var node2 = new Node();
        var node3 = new Node();

        var simulation1 = new SimulationNode(node1);
        var simulation2 = new SimulationNode(node1);
        var simulation3 = new SimulationNode(node1);

        // node1.OtherNodes = [simulation2, simulation3];
        // node2.OtherNodes = [simulation1, simulation3];
        // node3.OtherNodes = [simulation1, simulation2];
        StateHasChanged();

        nodes = [simulation1, simulation2, simulation3];
    }
}

